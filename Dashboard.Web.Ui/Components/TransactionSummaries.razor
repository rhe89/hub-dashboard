@using Dashboard.ViewModels.Sbanken
@using Dashboard.Dto.Sbanken
@using Dashboard.Web.Ui.Extension

<Card>
    <CardContent>
        <Typography
            Variant="@TypographyVariant.H5"
            Component="h5">
            @DisplayName
        </Typography>
        <Typography
            Variant="@TypographyVariant.Body1"
            Component="p">
            @AmountPrefix denne mnd: @(CurrentMonthTransactionsAmount.ToCurrency())
        </Typography>
        <Typography
            Variant="@TypographyVariant.Body1"
            Component="p">
            @AmountPrefix i Ã¥r: @(CurrentYearTransactionsAmount.ToCurrency())
        </Typography>
        <Typography
            Variant="@TypographyVariant.Body1"
            Component="p">
            @AmountPrefix totalt: @(TotalTransactionsAmount.ToCurrency())
        </Typography>
        
        @if (CurrentMonthTransactions.Any())
        {
            <TransactionsModal Transactions="@CurrentMonthTransactions"/>
        }
        
    </CardContent>
</Card>

@code
{
    [Parameter]
    public TransactionSummariesViewModel TransactionSummariesViewModel { get; set; }
    [Parameter]
    public string DisplayName { get; set; }
    [Parameter]
    public string AmountPrefix { get; set; }

    private decimal CurrentMonthTransactionsAmount => TransactionSummariesViewModel?.TransactionSummary?.CurrentMonthTransactions?.Amount ?? 0;
    private decimal CurrentYearTransactionsAmount => TransactionSummariesViewModel?.TransactionSummary?.CurrentYearTransactions?.Amount ?? 0;
    private decimal TotalTransactionsAmount => TransactionSummariesViewModel?.TransactionSummary?.TotalAmount ?? 0;

    private IList<TransactionDto> CurrentMonthTransactions => TransactionSummariesViewModel?.TransactionSummary?.CurrentMonthTransactions?.Transactions ?? new List<TransactionDto>();

}